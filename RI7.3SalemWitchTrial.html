<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salem 1692: Interaction Lab</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=IM+Fell+English&family=Special+Elite&display=swap');

        body {
            background-color: #1a150f;
            color: #3e2b14;
            font-family: 'IM Fell English', serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        #quiz-container {
            background: #e9dcc9;
            border: 8px double #3e2b14;
            padding: 40px;
            width: 100%;
            max-width: 650px;
            box-shadow: 15px 15px 0px #000;
            position: relative;
        }

        #quiz-container::before {
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: url('https://www.transparenttextures.com/patterns/paper-fibers.png');
            pointer-events: none;
            opacity: 0.4;
        }

        .home-nav {
            display: inline-block;
            margin-bottom: 20px;
            text-decoration: none;
            color: #3e2b14;
            font-family: 'Special Elite', monospace;
            font-size: 0.8rem;
            border: 1px solid #3e2b14;
            padding: 5px 12px;
            transition: all 0.3s;
            position: relative;
            z-index: 2;
        }

        .home-nav:hover {
            background-color: #3e2b14;
            color: #e9dcc9;
        }

        h1 {
            text-align: center;
            border-bottom: 2px solid #3e2b14;
            padding-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-size: 1.8rem;
            margin-top: 0;
        }

        .progress {
            font-family: 'Special Elite', monospace;
            font-size: 0.8rem;
            text-align: right;
            margin-bottom: 10px;
            color: #6d4c41;
        }

        .question {
            font-size: 1.3rem;
            margin-bottom: 25px;
            line-height: 1.4;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            position: relative;
            z-index: 2;
        }

        .option-btn {
            background: rgba(255, 255, 255, 0.4);
            border: 1px solid #3e2b14;
            padding: 15px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
            font-size: 1.1rem;
            color: #3e2b14;
        }

        .option-btn:hover {
            background: #dcd0ba;
            transform: translateX(5px);
        }

        #feedback-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fdf5e6;
            border: 5px solid #3e2b14;
            padding: 30px;
            z-index: 1000;
            width: 85%;
            max-width: 450px;
            text-align: center;
            box-shadow: 0 0 100px rgba(0,0,0,0.8);
        }

        #feedback-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            text-transform: uppercase;
        }

        #feedback-text {
            margin-bottom: 25px;
            line-height: 1.5;
            font-size: 1.05rem;
        }

        .close-btn {
            background: #3e2b14;
            color: #e9dcc9;
            border: none;
            padding: 12px 25px;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.9rem;
            text-transform: uppercase;
            text-decoration: none;
            display: inline-block;
        }

        #overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 999;
        }
    </style>
</head>
<body>

<div id="overlay"></div>

<div id="quiz-container">
    <a href="index.html" class="home-nav">← Back to Hub</a>
    <div class="progress" id="progress">Entry 1 of 10</div>
    <h1 id="title">Salem Interaction Lab</h1>
    <div id="quiz-content">
        <p class="question" id="question-text">Loading investigation...</p>
        <div class="options-container" id="options"></div>
    </div>
</div>

<div id="feedback-modal">
    <h2 id="feedback-title">Analysis Result</h2>
    <p id="feedback-text"></p>
    <button class="close-btn" onclick="closeModal()">Continue Investigation</button>
</div>

<script>
    let score = 0;
    let current = 0;

    const quizData = [
        {
            q: "How did the lack of scientific knowledge in 1692 interact with the physical symptoms of the girls?",
            options: [
                "It led the community to seek a supernatural explanation (witchcraft).",
                "It caused the town to ignore the girls until they got better.",
                "It forced the girls to admit they were faking symptoms."
            ],
            correct: 0,
            note: "RI.7.3: When a physical event (symptoms) lacks a known scientific idea, a new cultural idea (superstition) fills the gap."
        },
        {
            q: "What was the primary interaction between the initial accusations and social tensions in Salem?",
            options: [
                "The town worked together to protect the accused.",
                "People used accusations to settle old grudges over land and family disputes.",
                "The court dismissed the claims as simple teenage 'hysteria'."
            ],
            correct: 1,
            note: "The 'Ripple Effect': Small events interact with long-standing social ideas (grudges) to create a crisis."
        },
        {
            q: "How did the court’s decision to allow 'spectral evidence' change the power dynamic?",
            options: [
                "It gave the accused a way to prove innocence through dreams.",
                "It gave the accusers absolute power, as spectral evidence cannot be disproved.",
                "It balanced the power so both sides had an equal chance."
            ],
            correct: 1,
            note: "This idea (spectral evidence) interacted with the legal system (event) to make justice impossible."
        },
        {
            q: "How did the location of the first 'afflicted' girls (the home of Minister Samuel Parris) interact with the community's reaction?",
            options: [
                "It caused the town to ignore the event because they disliked the Minister.",
                "It gave the event immediate religious authority and sparked town-wide alarm.",
                "It caused the girls to be sent away to a different town for treatment."
            ],
            correct: 1,
            note: "RI.7.3: The high-profile status of the individuals (the Minister's family) interacted with the religious ideas of the town to accelerate the panic."
        },
        {
            q: "What happened when people finally started to question the use of spectral evidence?",
            options: [
                "The trials immediately stopped and everyone was set free.",
                "The interaction between logic and the law eventually dissolved the court.",
                "The accusers were arrested for lying."
            ],
            correct: 1,
            note: "As the idea of logic and verifiable evidence interacted with the legal system, the hysteria lost its power."
        },
        {
            q: "How did the idea of 'Puritan Purity' interact with the event of an accusation?",
            options: [
                "It meant that a 'good name' was enough to protect someone from any charge.",
                "It forced the accused to confess to a lie because their reputation was no longer enough to save them.",
                "It allowed neighbors to forgive each other easily."
            ],
            correct: 1,
            note: "An individual's reputation (idea) interacted with the court (event) to create a 'confess or die' situation."
        },
        {
            q: "How did the age of the accusers interact with the social hierarchy of Salem?",
            options: [
                "It flipped the power structure, giving children authority over the town’s most powerful adults.",
                "It reinforced the idea that children should be seen and not heard.",
                "It led to the creation of a new school for the girls."
            ],
            correct: 0,
            note: "This shows an interaction between individuals (the girls) and the social structure (ideas) of the town."
        },
        {
            q: "How did the social status of the first three women accused interact with the town’s willingness to believe the charges?",
            options: [
                "They were social outcasts, which made it easier for the community to target them without guilt.",
                "They were powerful leaders, which made the town afraid to question them.",
                "They were wealthy landowners, which made the town jealous of their money."
            ],
            correct: 0,
            note: "RI.7.3: The social standing of the individuals (outcasts) interacted with the community's fear to make the first accusations 'stick.'"
        },
        {
            q: "How did the isolated nature of Salem Village interact with the spread of rumors?",
            options: [
                "It allowed rumors to grow because they could not be easily checked against outside information.",
                "It made rumors travel much slower than in the city.",
                "It encouraged people to travel more to find the truth."
            ],
            correct: 0,
            note: "The physical setting (isolation) interacted with the spread of a dangerous idea (rumors)."
        },
        {
            q: "What specific interaction finally led Governor Phipps to stop the proceedings of the court?",
            options: [
                "The girls admitted they were lying for attention.",
                "The 'Spectral Evidence' was used to accuse the Governor's own wife, forcing him to intervene.",
                "The British government ordered him to stop the trials immediately."
            ],
            correct: 1,
            note: "When the idea of 'Spectral Evidence' interacted with an individual of high power (the Governor's wife), it finally forced a change in the legal event."
        }
    ];

    function loadQuestion() {
        const d = quizData[current];
        document.getElementById("progress").innerText = `Entry ${current + 1} of ${quizData.length}`;
        document.getElementById("question-text").innerText = d.q;
        const optCont = document.getElementById("options");
        optCont.innerHTML = "";

        d.options.forEach((opt, i) => {
            const btn = document.createElement("button");
            btn.className = "option-btn";
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(i);
            optCont.appendChild(btn);
        });
    }

    function checkAnswer(index) {
        const d = quizData[current];
        const isCorrect = (index === d.correct);
        if (isCorrect) {
            score++;
            document.getElementById("feedback-title").innerText = "✓ Analysis Verified";
            document.getElementById("feedback-title").style.color = "#2e7d32";
        } else {
            document.getElementById("feedback-title").innerText = "✗ Flawed Reasoning";
            document.getElementById("feedback-title").style.color = "#b71c1c";
        }
        document.getElementById("feedback-text").innerHTML = d.note;
        document.getElementById("feedback-modal").style.display = "block";
        document.getElementById("overlay").style.display = "block";
    }

    function closeModal() {
        document.getElementById("feedback-modal").style.display = "none";
        document.getElementById("overlay").style.display = "none";
        current++;
        if (current < quizData.length) {
            loadQuestion();
        } else {
            showEnd();
        }
    }

    function showEnd() {
        const finalScore = Math.round((score / quizData.length) * 100);
        const entryID = "1211047074"; 
        const formBaseURL = "https://docs.google.com/forms/d/e/1FAIpQLSd-glvVAJGNDvunL1ziEaZkMtZvpnZNQ_JNo720134QHLXS7A/viewform";
        const preFilledURL = `${formBaseURL}?usp=pp_url&entry.${entryID}=${finalScore}%25`;

        document.getElementById("quiz-content").innerHTML = `
            <div style="text-align:center; padding: 20px;">
                <h2 style="color:#3e2b14">Investigation Concluded</h2>
                <p style="font-size: 1.5rem; margin: 20px 0;">Final Analysis Score: <br><strong>${finalScore}%</strong></p>
                <p>To record your grade in the archives, click the button below to submit your score to Mr. Anderson.</p>
                
                <a href="${preFilledURL}" target="_blank" class="close-btn" style="margin-top:20px;">
                    Submit Score
                </a>
                
                <p style="font-family: 'Special Elite', monospace; font-size: 0.7rem; border-top: 1px solid #3e2b14; padding-top:20px; margin-top:40px;">
                    VERIFICATION CODE: [S-1692-7ELA-PRO]
                </p>
            </div>
        `;
    }

    loadQuestion();
</script>

</body>
</html>
