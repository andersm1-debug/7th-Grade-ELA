<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salem 1692: Interaction Lab</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=IM+Fell+English&family=Special+Elite&display=swap');

        body {
            background-color: #1a150f;
            color: #3e2b14;
            font-family: 'IM Fell English', serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        #quiz-container {
            background: #e9dcc9;
            border: 8px double #3e2b14;
            padding: 40px;
            width: 100%;
            max-width: 650px;
            box-shadow: 15px 15px 0px #000;
            position: relative;
        }

        #quiz-container::before {
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: url('https://www.transparenttextures.com/patterns/paper-fibers.png');
            pointer-events: none;
            opacity: 0.4;
        }

        .home-nav {
            display: inline-block;
            margin-bottom: 20px;
            text-decoration: none;
            color: #3e2b14;
            font-family: 'Special Elite', monospace;
            font-size: 0.8rem;
            border: 1px solid #3e2b14;
            padding: 5px 12px;
            transition: all 0.3s;
            position: relative;
            z-index: 2;
        }

        .home-nav:hover {
            background-color: #3e2b14;
            color: #e9dcc9;
        }

        h1 {
            text-align: center;
            border-bottom: 2px solid #3e2b14;
            padding-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-size: 1.8rem;
            margin-top: 0;
        }

        .progress {
            font-family: 'Special Elite', monospace;
            font-size: 0.8rem;
            text-align: right;
            margin-bottom: 10px;
            color: #6d4c41;
        }

        .question {
            font-size: 1.3rem;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        #hint-text {
            display: none;
            font-family: 'Special Elite', monospace;
            font-size: 0.9rem;
            color: #5d4037;
            background: rgba(62, 43, 20, 0.1);
            padding: 10px;
            border-left: 3px solid #3e2b14;
            margin-bottom: 20px;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            position: relative;
            z-index: 2;
        }

        .option-btn, .hint-btn {
            background: rgba(255, 255, 255, 0.4);
            border: 1px solid #3e2b14;
            padding: 15px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
            font-size: 1.1rem;
            color: #3e2b14;
        }

        .hint-btn {
            background: none;
            border: 1px dashed #3e2b14;
            font-size: 0.8rem;
            padding: 8px;
            margin-bottom: 15px;
            width: fit-content;
            font-family: 'Special Elite', monospace;
        }

        .option-btn:hover {
            background: #dcd0ba;
            transform: translateX(5px);
        }

        #feedback-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fdf5e6;
            border: 5px solid #3e2b14;
            padding: 30px;
            z-index: 1000;
            width: 85%;
            max-width: 450px;
            text-align: center;
            box-shadow: 0 0 100px rgba(0,0,0,0.8);
        }

        #feedback-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            text-transform: uppercase;
        }

        .close-btn {
            background: #3e2b14;
            color: #e9dcc9;
            border: none;
            padding: 12px 25px;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.9rem;
            text-transform: uppercase;
            text-decoration: none;
            display: inline-block;
        }

        #overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 999;
        }
    </style>
</head>
<body>

<div id="overlay"></div>

<div id="quiz-container">
    <a href="index.html" class="home-nav">← Back to Hub</a>
    <div class="progress" id="progress">Entry 1 of 10</div>
    <h1 id="title">Salem Interaction Lab</h1>
    <div id="quiz-content">
        <p class="question" id="question-text">Loading investigation...</p>
        <button class="hint-btn" onclick="showHint()">[ Seek Counsel ]</button>
        <div id="hint-text"></div>
        <div class="options-container" id="options"></div>
    </div>
</div>

<div id="feedback-modal">
    <h2 id="feedback-title">Analysis Result</h2>
    <p id="feedback-text" style="margin-bottom: 25px; line-height: 1.5; font-size: 1.05rem;"></p>
    <button class="close-btn" onclick="closeModal()">Continue Investigation</button>
</div>

<script>
    let score = 0;
    let current = 0;

    const quizData = [
        {
            q: "How did the lack of scientific knowledge in 1692 interact with the physical symptoms of the girls?",
            hint: "Think about how people explain things they don't understand without medicine.",
            options: [
                { text: "It led the community to seek a supernatural explanation (witchcraft).", correct: true },
                { text: "It caused the town to ignore the girls until they got better.", correct: false },
                { text: "It forced the girls to admit they were faking symptoms.", correct: false }
            ],
            note: "RI.7.3: When a physical event (symptoms) lacks a known scientific idea, a new cultural idea (superstition) fills the gap."
        },
        {
            q: "What was the primary interaction between the initial accusations and social tensions in Salem?",
            hint: "Did people use the trials to solve existing problems with their neighbors?",
            options: [
                { text: "People used accusations to settle old grudges over land and family disputes.", correct: true },
                { text: "The town worked together to protect the accused.", correct: false },
                { text: "The court dismissed the claims as simple teenage 'hysteria'.", correct: false }
            ],
            note: "The 'Ripple Effect': Small events interact with long-standing social ideas (grudges) to create a crisis."
        },
        {
            q: "How did the court’s decision to allow 'spectral evidence' change the power dynamic?",
            hint: "If you can't see the evidence, how can you argue against it?",
            options: [
                { text: "It gave the accusers absolute power, as spectral evidence cannot be disproved.", correct: true },
                { text: "It gave the accused a way to prove innocence through dreams.", correct: false },
                { text: "It balanced the power so both sides had an equal chance.", correct: false }
            ],
            note: "This idea (spectral evidence) interacted with the legal system (event) to make justice impossible."
        },
        {
            q: "How did the location of the first 'afflicted' girls (the home of Minister Samuel Parris) interact with the community's reaction?",
            hint: "Consider the influence a Minister had over a Puritan town.",
            options: [
                { text: "It gave the event immediate religious authority and sparked town-wide alarm.", correct: true },
                { text: "It caused the town to ignore the event because they disliked the Minister.", correct: false },
                { text: "It caused the girls to be sent away to a different town for treatment.", correct: false }
            ],
            note: "RI.7.3: The high-profile status of the individuals (the Minister's family) interacted with the religious ideas of the town to accelerate the panic."
        },
        {
            q: "How did the brutal death of Giles Corey (who was pressed to death) interact with the community's view of the trials?",
            hint: "Think about how a person's sympathy changes when they see something truly cruel.",
            options: [
                { text: "The extreme cruelty of his death began to turn public opinion against the trials.", correct: true },
                { text: "It made people even more afraid of the court and caused them to stop protesting.", correct: false },
                { text: "It convinced the town that Giles Corey was definitely a wizard.", correct: false }
            ],
            note: "RI.7.3: The death of an individual (event) interacted with the community's sense of justice (ideas), leading to a shift in how the trials were perceived."
        },
        {
            q: "How did the idea of 'Puritan Purity' interact with the event of an accusation?",
            hint: "Once someone was accused, did their past 'good' behavior still matter?",
            options: [
                { text: "It forced the accused to confess to a lie because their reputation was no longer enough to save them.", correct: true },
                { text: "It meant that a 'good name' was enough to protect someone from any charge.", correct: false },
                { text: "It allowed neighbors to forgive each other easily.", correct: false }
            ],
            note: "An individual's reputation (idea) interacted with the court (event) to create a 'confess or die' situation."
        },
        {
            q: "How did the age of the accusers interact with the social hierarchy of Salem?",
            options: [
                { text: "It flipped the power structure, giving children authority over the town’s most powerful adults.", correct: true },
                { text: "It reinforced the idea that children should be seen and not heard.", correct: false },
                { text: "It led to the creation of a new school for the girls.", correct: false }
            ],
            hint: "In 1692, who usually had the power, and who has it during the trials?",
            note: "This shows an interaction between individuals (the girls) and the social structure (ideas) of the town."
        },
        {
            q: "How did the social status of the first three women accused interact with the town’s willingness to believe the charges?",
            hint: "Is it easier to believe a crime was committed by someone who is already an outcast?",
            options: [
                { text: "They were social outcasts, which made it easier for the community to target them without guilt.", correct: true },
                { text: "They were powerful leaders, which made the town afraid to question them.", correct: false },
                { text: "They were wealthy landowners, which made the town jealous of their money.", correct: false }
            ],
            note: "RI.7.3: The social standing of the individuals (outcasts) interacted with the community's fear to make the first accusations 'stick.'"
        },
        {
            q: "How did the isolated nature of Salem Village interact with the spread of rumors?",
            hint: "Think about how news travels in a small, disconnected place versus a big city.",
            options: [
                { text: "It allowed rumors to grow because they could not be easily checked against outside information.", correct: true },
                { text: "It made rumors travel much slower than in the city.", correct: false },
                { text: "It encouraged people to travel more to find the truth.", correct: false }
            ],
            note: "The physical setting (isolation) interacted with the spread of a dangerous idea (rumors)."
        },
        {
            q: "What specific interaction finally led Governor Phipps to stop the proceedings of the court?",
            hint: "The Governor didn't act until the 'spectral evidence' hit very close to home.",
            options: [
                { text: "The 'Spectral Evidence' was used to accuse the Governor's own wife, forcing him to intervene.", correct: true },
                { text: "The girls admitted they were lying for attention.", correct: false },
                { text: "The British government ordered him to stop the trials immediately.", correct: false }
            ],
            note: "When the idea of 'Spectral Evidence' interacted with an individual of high power (the Governor's wife), it finally forced a change in the legal event."
        }
    ];

    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function showHint() {
        const hText = document.getElementById("hint-text");
        hText.innerText = quizData[current].hint;
        hText.style.display = "block";
    }

    function loadQuestion() {
        const d = quizData[current];
        document.getElementById("progress").innerText = `Entry ${current + 1} of ${quizData.length}`;
        document.getElementById("question-text").innerText = d.q;
        document.getElementById("hint-text").style.display = "none";
        const optCont = document.getElementById("options");
        optCont.innerHTML = "";

        let shuffledOptions = shuffle([...d.options]);

        shuffledOptions.forEach((opt) => {
            const btn = document.createElement("button");
            btn.className = "option-btn";
            btn.innerText = opt.text;
            btn.onclick = () => checkAnswer(opt.correct);
            optCont.appendChild(btn);
        });
    }

    function checkAnswer(isCorrect) {
        if (isCorrect) {
            score++;
            document.getElementById("feedback-title").innerText = "✓ Analysis Verified";
            document.getElementById("feedback-title").style.color = "#2e7d32";
        } else {
            document.getElementById("feedback-title").innerText = "✗ Flawed Reasoning";
            document.getElementById("feedback-title").style.color = "#b71c1c";
        }
        document.getElementById("feedback-text").innerHTML = quizData[current].note;
        document.getElementById("feedback-modal").style.display = "block";
        document.getElementById("overlay").style.display = "block";
    }

    function closeModal() {
        document.getElementById("feedback-modal").style.display = "none";
        document.getElementById("overlay").style.display = "none";
        current++;
        if (current < quizData.length) {
            loadQuestion();
        } else {
            showEnd();
        }
    }

    function showEnd() {
        const finalScore = Math.round((score / quizData.length) * 100);
        const entryID = "1211047074"; 
        const formBaseURL = "https://docs.google.com/forms/d/e/1FAIpQLSd-glvVAJGNDvunL1ziEaZkMtZvpnZNQ_JNo720134QHLXS7A/viewform";
        const preFilledURL = `${formBaseURL}?usp=pp_url&entry.${entryID}=${finalScore}%25`;

        document.getElementById("quiz-content").innerHTML = `
            <div style="text-align:center; padding: 20px;">
                <h2 style="color:#3e2b14">Investigation Concluded</h2>
                <p style="font-size: 1.5rem; margin: 20px 0;">Final Analysis Score: <br><strong>${finalScore}%</strong></p>
                <p>Submit your score to the archives below.</p>
                <a href="${preFilledURL}" target="_blank" class="close-btn" style="margin-top:20px;">Submit Score</a>
                <p style="font-family: 'Special Elite', monospace; font-size: 0.7rem; border-top: 1px solid #3e2b14; padding-top:20px; margin-top:40px;">VERIFICATION CODE: [S-1692-7ELA-PRO]</p>
            </div>
        `;
    }

    loadQuestion();
</script>

</body>
</html>
