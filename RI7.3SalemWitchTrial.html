<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salem 1692: Interaction Lab</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=IM+Fell+English&family=Special+Elite&display=swap');

        body {
            background-color: #1a150f;
            color: #3e2b14;
            font-family: 'IM Fell English', serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        #quiz-container {
            background: #e9dcc9; /* Parchment Color */
            border: 8px double #3e2b14;
            padding: 40px;
            width: 100%;
            max-width: 650px;
            box-shadow: 15px 15px 0px #000;
            position: relative;
        }

        #quiz-container::before {
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: url('https://www.transparenttextures.com/patterns/paper-fibers.png');
            pointer-events: none;
            opacity: 0.4;
        }

        .home-nav {
            display: inline-block;
            margin-bottom: 20px;
            text-decoration: none;
            color: #3e2b14;
            font-family: 'Special Elite', monospace;
            font-size: 0.8rem;
            border: 1px solid #3e2b14;
            padding: 5px 12px;
            transition: all 0.3s;
            position: relative;
            z-index: 2;
        }

        .home-nav:hover {
            background-color: #3e2b14;
            color: #e9dcc9;
        }

        h1 {
            text-align: center;
            border-bottom: 2px solid #3e2b14;
            padding-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-size: 1.8rem;
            margin-top: 0;
        }

        .progress {
            font-family: 'Special Elite', monospace;
            font-size: 0.8rem;
            text-align: right;
            margin-bottom: 10px;
            color: #6d4c41;
        }

        .question {
            font-size: 1.3rem;
            margin-bottom: 25px;
            line-height: 1.4;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            position: relative;
            z-index: 2;
        }

        .option-btn {
            background: rgba(255, 255, 255, 0.4);
            border: 1px solid #3e2b14;
            padding: 15px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
            font-size: 1.1rem;
            color: #3e2b14;
        }

        .option-btn:hover {
            background: #dcd0ba;
            transform: translateX(5px);
        }

        #feedback-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fdf5e6;
            border: 5px solid #3e2b14;
            padding: 30px;
            z-index: 1000;
            width: 85%;
            max-width: 450px;
            text-align: center;
            box-shadow: 0 0 100px rgba(0,0,0,0.8);
        }

        #feedback-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            text-transform: uppercase;
        }

        #feedback-text {
            margin-bottom: 25px;
            line-height: 1.5;
            font-size: 1.05rem;
        }

        .close-btn {
            background: #3e2b14;
            color: #e9dcc9;
            border: none;
            padding: 12px 25px;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.9rem;
            text-transform: uppercase;
        }

        #overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 999;
        }
    </style>
</head>
<body>

<div id="overlay"></div>

<div id="quiz-container">
    <a href="index.html" class="home-nav">← Back to Hub</a>
    <div class="progress" id="progress">Entry 1 of 10</div>
    <h1 id="title">Salem Interaction Lab</h1>
    <div id="quiz-content">
        <p class="question" id="question-text">Loading investigation...</p>
        <div class="options-container" id="options"></div>
    </div>
</div>

<div id="feedback-modal">
    <h2 id="feedback-title">Analysis Result</h2>
    <p id="feedback-text"></p>
    <button class="close-btn" onclick="closeModal()">Continue Investigation</button>
</div>

<script>
    const quizData = [
        {
            q: "How did the lack of scientific knowledge in 1692 interact with the physical symptoms of the girls?",
            options: [
                "It led the community to seek a supernatural explanation (witchcraft).",
                "It caused the town to ignore the girls until they got better.",
                "It forced the girls to admit they were faking symptoms."
            ],
            correct: 0,
            note: "RI.7.3: When a physical event (symptoms) lacks a known scientific idea, a new cultural idea (superstition) fills the gap."
        },
        {
            q: "What was the primary interaction between the initial accusations and social tensions in Salem?",
            options: [
                "The town worked together to protect the accused.",
                "People used accusations to settle old grudges over land and family disputes.",
                "The court dismissed the claims as simple teenage 'hysteria'."
            ],
            correct: 1,
            note: "The 'Ripple Effect': Small events interact with long-standing social ideas (grudges) to create a crisis."
        },
        {
            q: "How did the court’s decision to allow 'spectral evidence' change the power dynamic?",
            options: [
                "It gave the accused a way to prove innocence through dreams.",
                "It gave the accusers absolute power, as spectral evidence cannot be disproved.",
                "It balanced the power so both sides had an equal chance."
            ],
            correct: 1,
            note: "This idea (spectral evidence) interacted with the legal system (event) to make justice impossible."
        },
        {
            q: "How did the strict religious setting interact with the girls' fear of being caught dancing?",
            options: [
                "It encouraged them to tell the truth and ask for forgiveness.",
                "It created an environment where confessing to 'witchcraft' was safer than admitting to 'sin.'",
                "It allowed the girls to create a new church for themselves."
            ],
            correct: 1,
            note: "Strict social ideas interacted with the girls' actions, forcing them to lie to avoid harsh punishment."
        },
        {
            q: "What happened when people finally started to question the use of spectral evidence?",
            options: [
                "The trials immediately stopped and everyone was set free.",
                "The interaction between logic and the law eventually dissolved the court.",
                "The accusers were arrested for lying."
            ],
            correct: 1,
            note: "As the idea of logic and verifiable evidence interacted with the legal system, the hysteria lost its power."
        },
        {
            q: "How did the idea of 'Puritan Purity' interact with the event of an accusation?",
            options: [
                "It meant that a 'good name' was enough to protect someone from any charge.",
                "It forced the accused to confess to a lie because their reputation was no longer enough to save them.",
                "It allowed neighbors to forgive each other easily."
            ],
            correct: 1,
            note: "An individual's reputation (idea) interacted with the court (event) to create a 'confess or die' situation."
        },
        {
            q: "How did the age of the accusers interact with the social hierarchy of Salem?",
            options: [
                "It flipped the power structure, giving children authority over the town’s most powerful adults.",
                "It reinforced the idea that children should be seen and not heard.",
                "It led to the creation of a new school for the girls."
            ],
            correct: 0,
            note: "This shows an interaction between individuals (the girls) and the social structure (ideas) of the town."
        },
        {
            q: "How did economic events, like paying the Minister's salary, interact with the trials?",
            options: [
                "It provided the funding needed to pay for the lawyers.",
                "It created deep divisions in the church that made neighbors more likely to accuse one another.",
                "It had no effect on the community's behavior."
            ],
            correct: 1,
            note: "Economic events often interact with social ideas to create the 'fuel' for a community crisis."
        },
        {
            q: "How did the isolated nature of Salem Village interact with the spread of rumors?",
            options: [
                "It allowed rumors to grow because they could not be easily checked against outside information.",
                "It made rumors travel much slower than in the city.",
                "It encouraged people to travel more to find the truth."
            ],
            correct: 0,
            note: "The physical setting (isolation) interacted with the spread of a dangerous idea (rumors)."
        },
        {
            q: "How did the final executions interact with the ideas of the surviving community members?",
            options: [
                "The hangings confirmed that the community was finally safe from witches.",
                "The horror of the deaths eventually interacted with people's sense of justice, leading them to admit the court was wrong.",
                "The community decided to move the town to a new location."
            ],
            correct: 1,
            note: "New events (the deaths) eventually changed the community's ideas about the trials, ending the hysteria."
        }
    ];

    let current = 0;
    const qText = document.getElementById("question-text");
    const optCont = document.getElementById("options");
    const prog = document.getElementById("progress");
    const modal = document.getElementById("feedback-modal");
    const fbTitle = document.getElementById("feedback-title");
    const fbText = document.getElementById("feedback-text");
    const overlay = document.getElementById("overlay");

    function loadQuestion() {
        const d = quizData[current];
        prog.innerText = `Entry ${current + 1} of ${quizData.length}`;
        qText.innerText = d.q;
        optCont.innerHTML = "";

        d.options.forEach((opt, i) => {
            const btn = document.createElement("button");
            btn.className = "option-btn";
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(i);
            optCont.appendChild(btn);
        });
    }

    function checkAnswer(index) {
        const d = quizData[current];
        const isCorrect = (index === d.correct);
        
        if (isCorrect) {
            fbTitle.innerText = "✓ Analysis Verified";
            fbTitle.style.color = "#2e7d32";
            fbText.innerHTML = `<strong>Accurate.</strong><br><br>${d.note}`;
        } else {
            fbTitle.innerText = "✗ Flawed Reasoning";
            fbTitle.style.color = "#b71c1c";
            fbText.innerHTML = `<strong>Not quite.</strong> Review the Interaction Triangle.<br><br>${d.note}`;
        }

        modal.style.display = "block";
        overlay.style.display = "block";
    }

    function closeModal() {
        modal.style.display = "none";
        overlay.style.display = "none";
        current++;
        if (current < quizData.length) {
            loadQuestion();
        } else {
            showEnd();
        }
    }

    function showEnd() {
        document.getElementById("quiz-content").innerHTML = `
            <div style="text-align:center; padding: 20px;">
                <h2 style="color:#3e2b14">Investigation Concluded</h2>
                <p>You have successfully analyzed 10 key interactions of Salem, 1692.</p>
                <p style="font-family: 'Special Elite', monospace; font-size: 0.8rem; border-top: 1px solid #3e2b14; padding-top:20px; margin-top:20px;">
                    VERIFICATION CODE: [S-1692-7ELA-PRO]
                </p>
                <button class="close-btn" onclick="location.reload()">Reset Records</button>
            </div>
        `;
    }

    loadQuestion();
</script>

</body>
</html>
