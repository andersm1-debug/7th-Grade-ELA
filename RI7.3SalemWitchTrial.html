<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salem 1692: Interaction Lab</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=IM+Fell+English&family=Special+Elite&display=swap');

        body {
            background-color: #1a150f;
            color: #3e2b14;
            font-family: 'IM Fell English', serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        #quiz-container {
            background: #e9dcc9; /* Parchment Color */
            border: 8px double #3e2b14;
            padding: 40px;
            width: 100%;
            max-width: 650px;
            box-shadow: 15px 15px 0px #000;
            position: relative;
        }

        /* Paper Texture Overlay */
        #quiz-container::before {
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: url('https://www.transparenttextures.com/patterns/paper-fibers.png');
            pointer-events: none;
            opacity: 0.4;
        }

        /* Navigation Button */
        .home-nav {
            display: inline-block;
            margin-bottom: 20px;
            text-decoration: none;
            color: #3e2b14;
            font-family: 'Special Elite', monospace;
            font-size: 0.8rem;
            border: 1px solid #3e2b14;
            padding: 5px 12px;
            transition: all 0.3s;
            position: relative;
            z-index: 2;
        }

        .home-nav:hover {
            background-color: #3e2b14;
            color: #e9dcc9;
        }

        h1 {
            text-align: center;
            border-bottom: 2px solid #3e2b14;
            padding-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-size: 1.8rem;
            margin-top: 0;
        }

        .progress {
            font-family: 'Special Elite', monospace;
            font-size: 0.8rem;
            text-align: right;
            margin-bottom: 10px;
            color: #6d4c41;
        }

        .question {
            font-size: 1.3rem;
            margin-bottom: 25px;
            line-height: 1.4;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            position: relative;
            z-index: 2;
        }

        .option-btn {
            background: rgba(255, 255, 255, 0.4);
            border: 1px solid #3e2b14;
            padding: 15px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
            font-size: 1.1rem;
            color: #3e2b14;
        }

        .option-btn:hover {
            background: #dcd0ba;
            transform: translateX(5px);
        }

        /* Feedback Modal */
        #feedback-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fdf5e6;
            border: 5px solid #3e2b14;
            padding: 30px;
            z-index: 1000;
            width: 85%;
            max-width: 450px;
            text-align: center;
            box-shadow: 0 0 100px rgba(0,0,0,0.8);
        }

        #feedback-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            text-transform: uppercase;
        }

        #feedback-text {
            margin-bottom: 25px;
            line-height: 1.5;
            font-size: 1.05rem;
        }

        .close-btn {
            background: #3e2b14;
            color: #e9dcc9;
            border: none;
            padding: 12px 25px;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.9rem;
            text-transform: uppercase;
        }

        #overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 999;
        }
    </style>
</head>
<body>

<div id="overlay"></div>

<div id="quiz-container">
    <a href="https://andersm1-debug.github.io/7th-Grade-ELA/" class="home-nav">← Back to Hub</a>
    <div class="progress" id="progress">Entry 1 of 5</div>
    <h1 id="title">Salem Interaction Lab</h1>
    <div id="quiz-content">
        <p class="question" id="question-text">Loading investigation...</p>
        <div class="options-container" id="options"></div>
    </div>
</div>

<div id="feedback-modal">
    <h2 id="feedback-title">Analysis Result</h2>
    <p id="feedback-text"></p>
    <button class="close-btn" onclick="closeModal()">Continue Investigation</button>
</div>

<script>
    const quizData = [
        {
            q: "How did the lack of scientific knowledge in 1692 interact with the physical symptoms of the girls?",
            options: [
                "It led the community to seek a supernatural explanation (witchcraft).",
                "It caused the town to ignore the girls until they got better.",
                "It forced the girls to admit they were faking symptoms."
            ],
            correct: 0,
            note: "RI.7.3: When a physical event (symptoms) lacks a known scientific idea, a new cultural idea (superstition) fills the gap."
        },
        {
            q: "What was the primary interaction between the initial accusations and social tensions in Salem?",
            options: [
                "The town worked together to protect the accused.",
                "People used accusations to settle old grudges over land and family disputes.",
                "The court dismissed the claims as simple teenage 'hysteria'."
            ],
            correct: 1,
            note: "The 'Ripple' shows how an event (accusation) interacts with long-standing social ideas (grudges) to create a crisis."
        },
        {
            q: "How did the court’s decision to allow 'spectral evidence' change the power dynamic?",
            options: [
                "It gave the accused a way to prove innocence through dreams.",
                "It gave the accusers absolute power, as spectral evidence cannot be disproved.",
                "It balanced the power so both sides had an equal chance."
            ],
            correct: 1,
            note: "This idea (spectral evidence) interacted with the legal system to make justice impossible."
        },
        {
            q: "How did the strict religious setting interact with the girls' fear of being caught dancing?",
            options: [
                "It encouraged them to tell the truth and ask for forgiveness.",
                "It created an environment where confessing to 'witchcraft' was safer than admitting to 'sin.'",
                "It allowed the girls to create a new church for themselves."
            ],
            correct: 1,
            note: "Strict social ideas interacted with the girls' actions, forcing them to lie to avoid harsh punishment."
        },
        {
            q: "What happened when people finally started to question the use of spectral evidence?",
            options: [
                "The trials immediately stopped and everyone was set free.",
                "The interaction between logic and the law eventually dissolved the court.",
                "The accusers were arrested for lying."
            ],
            correct: 1,
            note: "As the idea of logic and verifiable evidence interacted with the legal system, the hysteria lost its power."
        }
    ];

    let current = 0;
    const qText = document.getElementById("question-text");
    const optCont = document.getElementById("options");
    const prog = document.getElementById("progress");
    const modal = document.getElementById("feedback-modal");
    const fbTitle = document.getElementById("feedback-title");
    const fbText = document.getElementById("feedback-text");
    const overlay = document.getElementById("overlay");

    function loadQuestion() {
        const d = quizData[current];
        prog.innerText = `Entry ${current + 1} of ${quizData.length}`;
        qText.innerText = d.q;
        optCont.innerHTML = "";

        d.options.forEach((opt, i) => {
            const btn = document.createElement("button");
            btn.className = "option-btn";
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(i);
            optCont.appendChild(btn);
        });
    }

    function checkAnswer(index) {
        const d = quizData[current];
        const isCorrect = (index === d.correct);
        
        if (isCorrect) {
            fbTitle.innerText = "✓ Analysis Verified";
            fbTitle.style.color = "#2e7d32";
            fbText.innerHTML = `<strong>Accurate.</strong><br><br>${d.note}`;
        } else {
            fbTitle.innerText = "✗ Flawed Reasoning";
            fbTitle.style.color = "#b71c1c";
            fbText.innerHTML = `<strong>Not quite.</strong> Review your Interaction Triangle.<br><br>${d.note}`;
        }

        modal.style.display = "block";
        overlay.style.display = "block";
    }

    function closeModal() {
        modal.style.display = "none";
        overlay.style.display = "none";
        current++;
        if (current < quizData.length) {
            loadQuestion();
        } else {
            showEnd();
        }
    }

    function showEnd() {
        document.getElementById("quiz-content").innerHTML = `
            <div style="text-align:center; padding: 20px;">
                <h2 style="color:#3e2b14">Investigation Concluded</h2>
                <p>You have successfully analyzed the interactions of Salem, 1692.</p>
                <p style="font-family: 'Special Elite', monospace; font-size: 0.8rem; border-top: 1px solid #3e2b14; padding-top:20px; margin-top:20px;">
                    VERIFICATION CODE: [S-1692-7ELA]
                </p>
                <button class="close-btn" onclick="location.reload()">Reset Records</button>
            </div>
        `;
    }

    loadQuestion();
</script>

</body>
</html>
